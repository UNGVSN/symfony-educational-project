{% extends 'base.html.twig' %}

{% block title %}{{ post.title }} - Blog{% endblock %}

{% block content %}
    <article class="blog-post">
        <header class="post-header">
            <h1>{{ post.title }}</h1>

            <div class="post-meta">
                <time datetime="{{ post.createdAt|date('Y-m-d') }}">
                    Posted on {{ post.createdAt|date('F j, Y') }}
                </time>

                {% if post.author is defined %}
                    <span class="author">by {{ post.author.name }}</span>
                {% endif %}

                {% if post.tags is defined and post.tags|length > 0 %}
                    <div class="tags">
                        {% for tag in post.tags %}
                            <span class="tag">{{ tag }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </header>

        <div class="post-content">
            {{ post.content|nl2br }}
        </div>

        {% if post.updatedAt and post.updatedAt > post.createdAt %}
            <div class="post-updated">
                <em>Last updated: {{ post.updatedAt|date('F j, Y') }}</em>
            </div>
        {% endif %}

        <footer class="post-footer">
            <a href="{{ path('blog_list') }}" class="back-link">
                &larr; Back to all posts
            </a>

            {% if post.nextPost is defined %}
                <a href="{{ path('blog_show', {id: post.nextPost.id}) }}" class="next-link">
                    Next: {{ post.nextPost.title }} &rarr;
                </a>
            {% endif %}
        </footer>
    </article>

    {% if post.comments is defined and post.comments|length > 0 %}
    <section class="comments">
        <h2>Comments ({{ post.comments|length }})</h2>

        {% for comment in post.comments %}
            <div class="comment">
                <div class="comment-header">
                    <strong>{{ comment.authorName }}</strong>
                    <time datetime="{{ comment.createdAt|date('Y-m-d') }}">
                        {{ comment.createdAt|date('F j, Y') }}
                    </time>
                </div>
                <div class="comment-body">
                    {{ comment.content }}
                </div>
            </div>
        {% endfor %}
    </section>
    {% endif %}
{% endblock %}
